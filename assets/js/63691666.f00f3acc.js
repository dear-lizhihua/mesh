"use strict";(self.webpackChunkmesh=self.webpackChunkmesh||[]).push([[8500],{3905:function(e,t,n){n.d(t,{Zo:function(){return c},kt:function(){return m}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),u=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=u(e.components);return a.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},p=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,l=e.originalType,s=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),p=u(n),m=r,k=p["".concat(s,".").concat(m)]||p[m]||d[m]||l;return n?a.createElement(k,o(o({ref:t},c),{},{components:n})):a.createElement(k,o({ref:t},c))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=n.length,o=new Array(l);o[0]=p;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:r,o[1]=i;for(var u=2;u<l;u++)o[u]=n[u];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}p.displayName="MDXCreateElement"},5731:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return i},metadata:function(){return s},toc:function(){return u},default:function(){return d}});var a=n(3117),r=n(102),l=(n(7294),n(3905)),o=["components"],i={sidebar_position:104},s={unversionedId:"optimization/arco_design_vue_analysis_tree_select_implement_detail",id:"optimization/arco_design_vue_analysis_tree_select_implement_detail",isDocsHomePage:!1,title:"arco-design-vue \u5206\u6790 TreeSelect \u7ec4\u4ef6\u7684\u5b9e\u73b0\u7ec6\u8282",description:"_hooks/use-state.js",source:"@site/docs/optimization/arco_design_vue_analysis_tree_select_implement_detail.md",sourceDirName:"optimization",slug:"/optimization/arco_design_vue_analysis_tree_select_implement_detail",permalink:"/mesh/docs/optimization/arco_design_vue_analysis_tree_select_implement_detail",editUrl:"https://github.com/dear-lizhihua/mesh/edit/main/docs/optimization/arco_design_vue_analysis_tree_select_implement_detail.md",version:"current",sidebarPosition:104,frontMatter:{sidebar_position:104},sidebar:"tutorialSidebar",previous:{title:"arco-design-vue \u5206\u6790 TreeSelect \u7ec4\u4ef6\u7684\u7ed3\u6784\u548c\u4ea4\u4e92",permalink:"/mesh/docs/optimization/arco_design_vue_analysis_tree_select"},next:{title:"arco-design-vue \u5206\u6790 CompositionEvent",permalink:"/mesh/docs/optimization/arco_design_vue_analysis_composition_event"}},u=[{value:"_hooks/use-state.js",id:"_hooksuse-statejs",children:[]},{value:"_utils/is.js",id:"_utilsisjs",children:[{value:"tree-select/tree-select.vue",id:"tree-selecttree-selectvue",children:[]}]},{value:"tree/hooks/use-tree-data.js",id:"treehooksuse-tree-datajs",children:[]},{value:"tree-select/hooks/use-selected-state.js",id:"tree-selecthooksuse-selected-statejs",children:[]},{value:"tree/utils/index.js",id:"treeutilsindexjs",children:[]},{value:"tree/utils/tree-data.js",id:"treeutilstree-datajs",children:[]},{value:"_components/select-view/select-view.jsx",id:"_componentsselect-viewselect-viewjsx",children:[]},{value:"components/input-tag/input-tag.tsx",id:"componentsinput-taginput-tagtsx",children:[]},{value:"render() \u5f15\u7528 setup()",id:"render-\u5f15\u7528-setup",children:[{value:"render() \u5f15\u7528 this.render()",id:"render-\u5f15\u7528-thisrender",children:[]},{value:"render() \u5f15\u7528 this.data",id:"render-\u5f15\u7528-thisdata",children:[]}]},{value:"jsx \u4f7f\u7528 v-slots \u548c\u900f\u4f20 props",id:"jsx-\u4f7f\u7528-v-slots-\u548c\u900f\u4f20-props",children:[]},{value:"\u95ee\u9898",id:"\u95ee\u9898",children:[{value:"tree-checkable \u662f\u5982\u4f55\u8f6c\u6362\u4e3a checkable",id:"tree-checkable-\u662f\u5982\u4f55\u8f6c\u6362\u4e3a-checkable",children:[]}]}],c={toc:u};function d(e){var t=e.components,n=(0,r.Z)(e,o);return(0,l.kt)("wrapper",(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h2",{id:"_hooksuse-statejs"},"_hooks/use-state.js"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"import { ref } from 'vue'\n\nexport default function useState (defaultValue) {\n  const value = ref(defaultValue)\n  const setValue = (newValue) => {\n    value.value = newValue\n  }\n  return [value, setValue]\n}\n")),(0,l.kt)("h2",{id:"_utilsisjs"},"_utils/is.js"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"const opt = Object.prototype.toString\nexport function isArray (obj) {\n  return opt.call(obj) === '[object Array]'\n}\nexport function isObject (obj) {\n  return opt.call(obj) === '[object Object]'\n}\nexport function isUndefined (obj) {\n  return obj === undefined\n}\n")),(0,l.kt)("h3",{id:"tree-selecttree-selectvue"},"tree-select/tree-select.vue"),(0,l.kt)("h4",{id:"\u6570\u636e\u4e0d\u4e22\u5931\u54cd\u5e94\u5f0f"},"\u6570\u636e\u4e0d\u4e22\u5931\u54cd\u5e94\u5f0f"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"toRefs \u7528\u6cd5\uff1a\u5c06\u54cd\u5e94\u5f0f\u5bf9\u8c61\u8f6c\u6362\u4e3a\u666e\u901a\u5bf9\u8c61\u3002\u5176\u4e2d\u7ed3\u679c\u5bf9\u8c61\u7684\u6bcf\u4e2a\u5c5e\u6027\uff0c\u90fd\u6307\u5411\u539f\u59cb\u5bf9\u8c61\u76f8\u5e94\u5c5e\u6027\u7684\u5f15\u7528\u3002")),(0,l.kt)("p",null,"\u8fd9\u91cc\u62ff\u5230 data, fieldNames, treeCheckable \u4e09\u4e2a\u5f15\u7528\uff0c\u518d\u521b\u5efa\u51fa\u4e00\u4e2a\u65b0\u7684\u5bf9\u8c61 { treeData, fieldNames, selectable, checkable }\u3002"),(0,l.kt)("p",null,"\u4f46\u6b64\u5bf9\u8c61\u4e0d\u662f\u54cd\u5e94\u5f0f\u7684\uff0c\u6211\u4eec\u9700\u8981\u4f7f\u7528 reactive({ treeData, fieldNames, selectable, checkable }) \u6062\u590d\u4e3a\u54cd\u5e94\u5f0f\u5bf9\u8c61\u3002"),(0,l.kt)("p",null,"\u8fd9\u6837 useTreeData \u51fd\u6570\u5185\u90e8\u624d\u80fd\u591f\u4f7f\u7528 watchEffect \u89c2\u5bdf\u5230\u65b0\u7684\u5bf9\u8c61\u7684\u53d8\u5316"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"const {\n  data,\n  fieldNames,\n  treeCheckable,\n} = toRefs(props)\n\nconst {flattenTreeData, key2TreeNode} = useTreeData(reactive({\n  treeData: data,\n  fieldNames,\n  selectable: true,\n  checkable: treeCheckable,\n}))\n")),(0,l.kt)("h2",{id:"treehooksuse-tree-datajs"},"tree/hooks/use-tree-data.js"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"generateTreeData \u51fd\u6570\uff1a\u5c06\u7528\u6237\u4f20\u5165\u7684 ",(0,l.kt)("inlineCode",{parentName:"li"},"\u6811\u7ed3\u6784+\u7b80\u5355\u6570\u636e"),"\uff08\u53ea\u5305\u542b title, value, key, children \u56db\u4e2a\u5c5e\u6027\uff09\uff0c\u6620\u5c04\u4e3a ",(0,l.kt)("inlineCode",{parentName:"li"},"\u6811\u7ed3\u6784+\u6269\u5c55\u6570\u636e"),"\uff08\u5305\u542b blockNode, checkable, children, disableCheckbox, disabled, draggable, isLeaf, isTail, key, level, lineless, parent, parentKey, pathParentKeys, selectable, showLine, title, treeNodeData, treeNodeProps, value \u5341\u51e0\u4e2a\u5c5e\u6027\uff0c\u7528\u4e8e\u8868\u8ff0\u6811\u7684\u5c55\u793a\u6e32\u67d3\u548c\u52fe\u9009\u4ea4\u4e92\uff09\u3002"),(0,l.kt)("li",{parentName:"ol"},"getFlattenTreeData \u51fd\u6570\uff1a\u4f7f\u7528 ",(0,l.kt)("inlineCode",{parentName:"li"},"\u6df1\u5ea6\u4f18\u5148")," \u904d\u5386 ",(0,l.kt)("inlineCode",{parentName:"li"},"\u6811\u7ed3\u6784"),"\u3002"),(0,l.kt)("li",{parentName:"ol"},"getKey2TreeNode \u51fd\u6570\uff1a\u521b\u5efa\u4e00\u4e2a map\uff0c\u7528\u4e8e\u6620\u5c04 key \u548c node \u4e4b\u95f4\u7684\u5173\u7cfb\u3002")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"import { computed, ref, toRefs, watchEffect } from 'vue'\nimport { getFlattenTreeData, getKey2TreeNode } from '../utils'\nimport { generateTreeData } from '../utils/tree-data'\nexport default function useTreeData (props) {\n  const {\n    treeData: propTreeData,\n    fieldNames,\n    selectable,\n    showLine,\n    blockNode,\n    checkable,\n    loadMore,\n    draggable,\n  } = toRefs(props)\n  const treeData = ref([])\n  watchEffect(() => {\n    treeData.value = generateTreeData(propTreeData.value || [], {\n      selectable: !!selectable?.value,\n      showLine: !!showLine?.value,\n      blockNode: !!blockNode?.value,\n      checkable: !!checkable?.value,\n      fieldNames: fieldNames?.value,\n      loadMore: !!loadMore?.value,\n      draggable: !!draggable?.value,\n    })\n  })\n  const flattenTreeData = computed(() => getFlattenTreeData(treeData.value))\n  const key2TreeNode = computed(() => getKey2TreeNode(flattenTreeData.value))\n  return {treeData, flattenTreeData, key2TreeNode}\n}\n")),(0,l.kt)("h2",{id:"tree-selecthooksuse-selected-statejs"},"tree-select/hooks/use-selected-state.js"),(0,l.kt)("p",null,"\u6b63\u5e38\u5316 modelValue \u548c defaultValue \u7684\u503c\u3002\u7ec6\u8282\u63cf\u8ff0\u5982\u4e0b\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u5c06 undefined \u8f6c\u4e3a undefined\u3002"),(0,l.kt)("li",{parentName:"ul"},"\u591a\u9009\u6216\u52fe\u9009\u60c5\u51b5\u4e0b\uff0c\u5c06 ",(0,l.kt)("inlineCode",{parentName:"li"},"\u975e\u6570\u7ec4\u7ed3\u6784\u7684\u503c")," \u8f6c\u4e3a ",(0,l.kt)("inlineCode",{parentName:"li"},"\u6570\u7ec4\u7ed3\u6784\u7684\u503c"),"\u3002"),(0,l.kt)("li",{parentName:"ul"},"\u5355\u9009\u60c5\u51b5\u4e0b\uff0c\u5c06 ",(0,l.kt)("inlineCode",{parentName:"li"},"\u6570\u7ec4\u7ed3\u6784\u7684\u591a\u4e2a\u503c")," \u8f6c\u4e3a ",(0,l.kt)("inlineCode",{parentName:"li"},"\u6570\u7ec4\u7ed3\u6784\u7684\u5355\u4e2a\u503c"),"\u3002")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"export default function useSelectedState (props) {\n  function normalizeValue (value) {\n    if (isUndefined(value)) return undefined\n    if (multiple?.value || treeCheckable?.value)\n      return !isArray(value) ? [value] : value\n    return isArray(value) ? value.slice(0, 1) : [value]\n  }\n  watchEffect(() => {\n    const normalizeModelValue = normalizeValue(modelValue.value)\n  })\n  const normalizeDefaultValue = normalizeValue(defaultValue.value)\n}\n")),(0,l.kt)("p",null,"\u83b7\u53d6\u6570\u7ec4\u4e2d\u7684 keys\u3002\u7ec6\u8282\u63cf\u8ff0\u5982\u4e0b\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u904d\u5386\u6570\u7ec4\u3002item \u5982\u679c\u662f\u5bf9\u8c61\u53d6 item.value\uff0citem \u5982\u679c\u4e0d\u662f\u5bf9\u8c61\u53d6 item\u3002"),(0,l.kt)("li",{parentName:"ul"},"\u8fc7\u6ee4\u6570\u7ec4\u3002item \u662f undefined \u6216 ''\u3002")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"const opt = Object.prototype.toString\nconst isObject = (obj) => opt.call(obj) === '[object Object]'\nconst isUndefined = (obj) => obj === undefined\nexport default function useSelectedState (props) {\n  function getKeys (value) {\n    if (!value) return undefined\n    const keys = value.map((item) => (isObject(item) ? item.value : item)).filter((item) => !isUndefined(item) && item !== '')\n    return keys\n  }\n  watchEffect(() => {\n    const modelValueKeys = getKeys(normalizeModelValue)\n  })\n  const defaultKeys = getKeys(normalizeDefaultValue)\n}\n")),(0,l.kt)("h2",{id:"treeutilsindexjs"},"tree/utils/index.js"),(0,l.kt)("p",null,"getFlattenTreeData \u51fd\u6570\uff1a\u4f7f\u7528 ",(0,l.kt)("inlineCode",{parentName:"p"},"\u6df1\u5ea6\u4f18\u5148")," \u904d\u5386 ",(0,l.kt)("inlineCode",{parentName:"p"},"\u6811\u7ed3\u6784"),"\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"export function getFlattenTreeData (tree) {\n  const flattenTreeData = []\n  function preOrder (tree) {\n    if (!tree) return\n    tree.forEach((node) => {\n      flattenTreeData.push(node)\n      preOrder(node.children)\n    })\n  }\n  preOrder(tree)\n  return flattenTreeData\n}\n")),(0,l.kt)("p",null,"getKey2TreeNode \u51fd\u6570\uff1a\u521b\u5efa\u4e00\u4e2a map\uff0c\u7528\u4e8e\u6620\u5c04 key \u548c node \u4e4b\u95f4\u7684\u5173\u7cfb\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"export function getKey2TreeNode (flattenTreeData) {\n  const key2TreeNode = {}\n  flattenTreeData.forEach((node) => {\n    key2TreeNode[node.key] = node\n  })\n  return key2TreeNode\n}\n")),(0,l.kt)("h2",{id:"treeutilstree-datajs"},"tree/utils/tree-data.js"),(0,l.kt)("p",null,"\u6811\u7ed3\u6784+\u7b80\u5355\u6570\u636e\u7684\u793a\u4f8b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"const serviceOptions = ref([{\n  title: `\u5168\u90e8(17)`,\n  value: 'all',\n  key: 'all',\n  children: [\n    {'title': 'Cloud Run', 'key': '152E-C115-5142', 'value': '152E-C115-5142'},\n    {'title': 'Cloud Scheduler', 'key': '1F14-4801-0E16', 'value': '1F14-4801-0E16'},\n    {'title': 'BigQuery', 'key': '24E6-581D-38E5', 'value': '24E6-581D-38E5'},\n    {'title': 'Cloud CDN', 'key': '2992-EE56-ACD8', 'value': '2992-EE56-ACD8'},\n    {'title': 'Cloud Functions', 'key': '29E7-DA93-CA13', 'value': '29E7-DA93-CA13'},\n    {'title': 'Cloud Logging', 'value': '5490-F7B7-8DF6', 'key': '5490-F7B7-8DF6'},\n    {'title': 'Stackdriver Monitoring', 'value': '58CD-E7C3-72CA', 'key': '58CD-E7C3-72CA'},\n    {'title': 'Cloud Memorystore for Redis', 'value': '5AF5-2C11-D467', 'key': '5AF5-2C11-D467'},\n    {'title': 'VM Manager', 'value': '5E18-9A83-2867', 'key': '5E18-9A83-2867'},\n    {'title': 'Compute Engine', 'value': '6F81-5844-456A', 'key': '6F81-5844-456A'},\n    {'title': 'Cloud Storage', 'value': '95FF-2EF5-5EA1', 'key': '95FF-2EF5-5EA1'},\n    {'title': 'Cloud SQL', 'value': '9662-B51E-5089', 'key': '9662-B51E-5089'},\n    {'title': 'Cloud Pub/Sub', 'value': 'A1E8-BE35-7EBC', 'key': 'A1E8-BE35-7EBC'},\n    {'title': 'Vertex AI', 'value': 'C7E2-9256-1C43', 'key': 'C7E2-9256-1C43'},\n    {'title': 'Source Repository', 'value': 'CAE2-A537-4A95', 'key': 'CAE2-A537-4A95'},\n    {'title': 'App Engine', 'value': 'F17B-412E-CB64', 'key': 'F17B-412E-CB64'},\n    {'title': 'Cloud DNS', 'value': 'FA26-5236-B8B5', 'key': 'FA26-5236-B8B5'},\n  ],\n}])\n")),(0,l.kt)("p",null,"\u7b80\u5316\u4ee3\u7801"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"import { omit } from '../../_utils/omit'\nimport { isUndefined } from '../../_utils/is'\nexport const generateKey = (() => {\n  let i = 0\n  return () => {\n    i += 1\n    return `__arco_tree${i}`\n  }\n})()\nfunction getBoolean (val1, val2) {\n  return !!(isUndefined(val1) ? val2 : val1)\n}\nfunction mapObject (obj, nameMap) {\n  const _obj = {...obj}\n  if (nameMap) {\n    const names = Object.keys(nameMap)\n    names.forEach((name) => {\n      const sourceName = nameMap[name]\n      if (sourceName !== name) {\n        _obj[name] = obj[sourceName]\n        delete _obj[sourceName]\n      }\n    })\n  }\n  return _obj\n}\nfunction generateNode (options) {\n  const {treeNodeData, parentNode, isTail = true, treeProps} = options\n  const {fieldNames} = treeProps || {}\n  const mapTreeNodeData = mapObject(treeNodeData, fieldNames)\n  const treeNodeProps = {\n    ...omit(mapTreeNodeData, ['children']),\n    key: mapTreeNodeData.key ?? generateKey(),\n    selectable: getBoolean(mapTreeNodeData.selectable, treeProps?.selectable),\n    disabled: !!mapTreeNodeData.disabled,\n    disableCheckbox: !!mapTreeNodeData.disableCheckbox,\n    checkable: getBoolean(mapTreeNodeData.checkable, treeProps?.checkable),\n    isLeaf: treeProps.loadMore\n      ? !!mapTreeNodeData.isLeaf\n      : !mapTreeNodeData.children?.length,\n    isTail,\n    blockNode: !!treeProps?.blockNode,\n    showLine: !!treeProps?.showLine,\n    level: parentNode ? parentNode.level + 1 : 0,\n    // showLine \u6a21\u5f0f\u4e0b\u662f\u5426\u663e\u793a\u7f29\u8fdb\u7ebf\u3002\n    // \u5982\u679c\u7236\u8282\u70b9\u662f\u5176\u6240\u5728\u5c42\u7ea7\u7684\u6700\u540e\u4e00\u4e2a\u8282\u70b9\uff0c\u90a3\u4e48\u6240\u6709\u7684\u5b50\u8282\u70b9\uff08\u5305\u62ec\u5b59\u5b50\u8282\u70b9\u7b49\uff09\u5728\u7236\u8282\u70b9\u6240\u5728\u5c42\u7ea7\u7684\u7f29\u8fdb\u683c\u90fd\u4e0d\u663e\u793a\u7f29\u8fdb\u7ebf\u3002\n    lineless: parentNode ? [...parentNode.lineless, parentNode.isTail] : [],\n    draggable: getBoolean(mapTreeNodeData.draggable, treeProps?.draggable),\n  }\n  const node = {\n    ...treeNodeProps,\n    treeNodeProps,\n    treeNodeData,\n    parent: parentNode,\n    parentKey: parentNode?.key,\n    pathParentKeys: parentNode\n      ? [...parentNode.pathParentKeys, parentNode.key]\n      : [],\n  }\n  return node\n}\nexport function generateTreeData (treeData, treeProps) {\n  function preOrder (tree, parentNode) {\n    if (!tree) return undefined\n    const {fieldNames} = treeProps\n    const nodes = []\n    tree.forEach((treeNodeData, index) => {\n      const node = generateNode({\n        treeNodeData,\n        treeProps,\n        parentNode,\n        isTail: index === tree.length - 1,\n      })\n      node.children = preOrder(treeNodeData[(fieldNames?.children || 'children')], node)\n      nodes.push(node)\n    })\n    return nodes\n  }\n  return preOrder(treeData)\n}\n")),(0,l.kt)("h2",{id:"_componentsselect-viewselect-viewjsx"},"_components/select-view/select-view.jsx"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u5c06 multiple \u591a\u9009\uff0c\u4f46 modelValue \u662f Object \u7684\u8f6c\u4e3a Array \u503c"),(0,l.kt)("li",{parentName:"ul"},"\u5c06 multiple \u5355\u9009\uff0c\u4f46 modelValue \u662f Array \u7684\u8f6c\u4e3a Object \u503c")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"const validValue = computed(() => {\n  // transform to array\n  if (props.multiple && !isArray(props.modelValue)) {\n    return props.modelValue ? [props.modelValue] : []\n  }\n  // transform to object\n  if (!props.multiple && isArray(props.modelValue)) {\n    return props.modelValue[0]\n  }\n  return props.modelValue\n})\n")),(0,l.kt)("h2",{id:"componentsinput-taginput-tagtsx"},"components/input-tag/input-tag.tsx"),(0,l.kt)("h2",{id:"render-\u5f15\u7528-setup"},"render() \u5f15\u7528 setup()"),(0,l.kt)("h3",{id:"render-\u5f15\u7528-thisrender"},"render() \u5f15\u7528 this.render()"),(0,l.kt)("p",null,"select-view.jsx"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"export default defineComponent({\n  name: 'SelectView',\n  setup (props) {\n    const render = () => {\n      if (isArray(validValue.value)) {\n        return (\n          <InputTag />\n        )\n      }\n    }\n    return {\n      render,\n    }\n  },\n  render () {\n    return this.render()\n  },\n})\n")),(0,l.kt)("h3",{id:"render-\u5f15\u7528-thisdata"},"render() \u5f15\u7528 this.data"),(0,l.kt)("p",null,"tree-select/panel.jsx"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-jsx"},"export default defineComponent({\n  name: 'TreeSelectPanel',\n  props: {\n    treeProps: {\n      type: Object,\n      default: () => ({}),\n    },\n  },\n  setup(props) {\n    const { treeProps } = toRefs(props)\n    return {\n      treeProps,\n    }\n  },\n  render() {\n    return (\n      <Tree\n        {...this.treeProps}\n      />\n    )\n  }\n})\n")),(0,l.kt)("h2",{id:"jsx-\u4f7f\u7528-v-slots-\u548c\u900f\u4f20-props"},"jsx \u4f7f\u7528 v-slots \u548c\u900f\u4f20 props"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},'export default defineComponent({\n  render() {\n    return (\n      <Tree\n        ref="refTree"\n        {...this.computedTreeProps}\n        checkable={this.checkable}\n        onSelect={this.onSelect}\n        onCheck={this.onCheck}\n        v-slots={this.treeSlots}\n      />\n    )\n  },\n})\n')),(0,l.kt)("h2",{id:"\u95ee\u9898"},"\u95ee\u9898"),(0,l.kt)("h3",{id:"tree-checkable-\u662f\u5982\u4f55\u8f6c\u6362\u4e3a-checkable"},"tree-checkable \u662f\u5982\u4f55\u8f6c\u6362\u4e3a checkable"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u5c55\u793a checkbox \u5373 ",(0,l.kt)("inlineCode",{parentName:"li"},':tree-checkable="true"'),"\uff1a\u8868\u793a Tree \u7ec4\u4ef6\u5c55\u793a checkbox\u3002SelectView \u7ec4\u4ef6\u5c55\u793a\u591a\u4e2a Tag"),(0,l.kt)("li",{parentName:"ul"},"\u4e0d\u5c55\u793a checkbox \u5373 ",(0,l.kt)("inlineCode",{parentName:"li"},':tree-checkable="false"'),"\uff1a\u8868\u793a Tree \u7ec4\u4ef6\u4e0d\u5c55\u793a checkbox",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},':multiple="true"'),"\uff1aSelectView \u7ec4\u4ef6\u5c55\u793a\u591a\u4e2a Tag"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},':multiple="false"'),"\uff1aSelectView \u7ec4\u4ef6\u5c55\u793a\u4e00\u4e2a Text")))),(0,l.kt)("p",null,"\u7ed3\u8bba\uff1a\u662f\u5426\u5c55\u793a checkbox\uff0c\u53ea\u5f71\u54cd\u5c55\u793a\u903b\u8f91\uff0c\u4e0d\u5f71\u54cd\u52fe\u9009\u903b\u8f91"))}d.isMDXComponent=!0}}]);